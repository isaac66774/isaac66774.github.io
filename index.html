<!DOCTYPE html>
<html lang="en">
<head>
  <title>Isaac's Skins Gallery</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#111111">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<style>
:root {
  --bg:#111;
  --text:#fff;
  --card:#1e1e1e;
  --accent:#ff4081;
}

body.light {
  --bg:#f4f4f4;
  --text:#000;
  --card:#fff;
}

body {
  margin:0;
  padding:18px;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

h1 { text-align:center; }

/* ---- Titles ---- */
h2 {
  font-size:clamp(24px,4vw,34px);
  margin:45px 0 18px;
  font-weight:800;
  color:var(--accent);
}

h2::after {
  content:"";
  display:block;
  width:60px;
  height:4px;
  margin-top:8px;
  background:linear-gradient(90deg,#ff4081,#ff80ab);
  border-radius:6px;
}

/* ---- Buttons ---- */
.top-bar {
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
  margin-bottom:20px;
}

button {
  padding:12px 16px;
  border:none;
  border-radius:10px;
  background:#007bff;
  color:#fff;
  font-size:16px;
}

button:active { transform:scale(.95); }

/* ---- CLEAN GRID ---- */
.gallery {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px;
}

/* ---- CARD ---- */
.item {
  position:relative;
  overflow:hidden;
  border-radius:14px;
  background:var(--card);
  aspect-ratio:3/4;
}

/* ---- IMAGE ---- */
.item img {
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:opacity .4s ease;
}

.item img.loaded { opacity:1; }

/* ---- Watermark ---- */
.watermark {
  position:absolute;
  bottom:8px;
  left:10px;
  font-size:12px;
  opacity:.6;
}

/* ---- Download ---- */
.download {
  position:absolute;
  bottom:8px;
  right:8px;
  background:rgba(0,0,0,.6);
  padding:8px;
  border-radius:50%;
  color:#fff;
  text-decoration:none;
}

/* ---- Lightbox ---- */
.lightbox {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.lightbox img {
  max-width:100%;
  max-height:100%;
}

.lightbox.show { display:flex; }

/* ---- Floating buttons ---- */
.jump-btn {
  position:fixed;
  right:18px;
  bottom:18px;
  padding:14px 18px;
  border-radius:50px;
  background:var(--accent);
  color:#fff;
  z-index:999;
}

.top-btn {
  bottom:70px;
  background:#00c853;
  display:none;
}

/* ---- Music Toggle ---- */
.music-btn {
  position:fixed;
  left:18px;
  bottom:18px;
  width:52px;
  height:52px;
  border-radius:50%;
  background:#222;
  color:#fff;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}

/* ---- Mobile ---- */
@media(max-width:480px){
  .gallery {
    grid-template-columns:repeat(2,1fr);
  }
}

.hidden{display:none;}
</style>
</head>

<body>

<button class="jump-btn" onclick="goToQuotes()">üëÄ</button>
<button class="jump-btn top-btn" onclick="goToTop()">‚¨Ü</button>

<!-- MUSIC BUTTON -->
<button class="music-btn" id="musicBtn" onclick="toggleMusic()">üéµ</button>

<audio id="bgMusic" loop>
  <source src="music/bg.mp3" type="audio/mpeg">
</audio>

<h1>liviiii.fr üçÇ</h1>

<div class="top-bar">
  <button onclick="toggleMode()">üåì Mode</button>
  <button onclick="downloadZip()">üì¶ Download</button>
  <button onclick="unlock()">üîê Hidden</button>
</div>

<h2>üî• Skins Hand Picked</h2>
<div class="gallery" id="public"></div>

<h2 id="quotesSection">üí¨ Quotes MMD</h2>
<div class="gallery" id="quotes"></div>

<h2 class="hidden" id="hiddenTitle">üï∂ Private Album</h2>
<div class="gallery hidden" id="private"></div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
  <img id="lightboxImg">
</div>

<script>
const PUBLIC_COUNT = 67;
const QUOTES_COUNT = 31;
const BATCH = 12;

const music = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");

/* Auto play on first tap (mobile-safe) */
document.body.addEventListener("click",()=>{
  if(music.paused){
    music.play().catch(()=>{});
  }
},{once:true});

function toggleMusic(){
  if(music.paused){
    music.play();
    musicBtn.textContent="üéµ";
  }else{
    music.pause();
    musicBtn.textContent="üîá";
  }
}

function toggleMode(){document.body.classList.toggle("light");}

function unlock(){
  if(prompt("Password")==="6677"){
    private.classList.remove("hidden");
    hiddenTitle.classList.remove("hidden");
  }
}

/* ---- Progressive Load ---- */
function loadGallery(folder,count,prefix,id){
  const container=document.getElementById(id);
  let loaded=0;

  function loadBatch(){
    for(let i=0;i<BATCH && loaded<count;i++){
      loaded++;
      const item=document.createElement("div");
      item.className="item";

      const img=document.createElement("img");
      img.src=`${folder}/${prefix}${loaded}.jpg`;
      img.loading="lazy";
      img.onload=()=>img.classList.add("loaded");
      img.onclick=()=>openLightbox(img.src);

      const wm=document.createElement("span");
      wm.className="watermark";
      wm.textContent="ùì≤ùìºùì™ùì™ùì¨ üÖ¥";

      const dl=document.createElement("a");
      dl.className="download";
      dl.href=img.src;
      dl.download="";
      dl.textContent="‚¨á";

      item.append(img,wm,dl);
      container.appendChild(item);
    }
  }

  loadBatch();
  window.addEventListener("scroll",()=>{
    if(window.innerHeight+window.scrollY>=document.body.offsetHeight-300){
      loadBatch();
    }
  });
}

/* ---- Lightbox ---- */
function openLightbox(src){
  lightboxImg.src=src;
  lightbox.classList.add("show");
}
function closeLightbox(){
  lightbox.classList.remove("show");
}

/* ---- Nav ---- */
function goToQuotes(){
  quotesSection.scrollIntoView({behavior:"smooth"});
}
function goToTop(){
  window.scrollTo({top:0,behavior:"smooth"});
}

window.addEventListener("scroll",()=>{
  document.querySelector(".top-btn").style.display =
    window.scrollY>500?"block":"none";
});

/* ---- Load ---- */
loadGallery("photos",PUBLIC_COUNT,"photo","public");
loadGallery("quotes",QUOTES_COUNT,"quote","quotes");
</script>

</body>
</html>
