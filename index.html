<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Isaac's Skins Gallery</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<meta name="theme-color" content="#111111">

<style>
:root{
  --bg:#111;
  --text:#fff;
  --card:#1e1e1e;
  --accent:#ff4081;
}

body.light{
  --bg:#f4f4f4;
  --text:#000;
  --card:#fff;
}

body{
  margin:0;
  padding:16px;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ---------- Titles ---------- */
h1{text-align:center;margin:10px 0}
h2{
  margin:40px 0 14px;
  color:var(--accent);
  text-transform:uppercase;
}
h2::after{
  content:"";
  display:block;
  width:50px;
  height:4px;
  background:linear-gradient(90deg,#ff4081,#ff80ab);
  margin-top:6px;
  border-radius:6px;
}

/* ---------- Top bar ---------- */
.top-bar{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-bottom:16px;
}
button{
  padding:10px 16px;
  border:none;
  border-radius:8px;
  background:#007bff;
  color:#fff;
}

/* ---------- CLEAN GRID ---------- */
.gallery{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  opacity:0;
  transform:translateY(20px);
  transition:.5s;
}
.gallery.visible{
  opacity:1;
  transform:none;
}

/* ---------- Card ---------- */
.item{
  position:relative;
  aspect-ratio:3/4;
  background:var(--card);
  border-radius:14px;
  overflow:hidden;
}

/* Blur placeholder */
.item::before{
  content:"";
  position:absolute;
  inset:0;
  background:#333;
  filter:blur(20px);
  z-index:0;
}

/* Image */
.item img{
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:.4s;
  position:relative;
  z-index:1;
}
.item img.loaded{opacity:1}

/* Watermark */
.watermark{
  position:absolute;
  bottom:8px;
  left:10px;
  font-size:12px;
  opacity:.6;
  z-index:3;
}

/* Download */
.download{
  position:absolute;
  bottom:10px;
  right:10px;
  background:rgba(0,0,0,.6);
  padding:10px;
  border-radius:50%;
  color:#fff;
  z-index:3;
}

/* Favorite */
.fav{
  position:absolute;
  top:10px;
  right:10px;
  font-size:18px;
  z-index:3;
}
.fav.active{color:#ffd700}

/* ---------- Floating buttons ---------- */
.jump-btn{
  position:fixed;
  right:16px;
  bottom:16px;
  background:var(--accent);
  padding:14px 18px;
  border-radius:50px;
  color:#fff;
  border:none;
  z-index:999;
}
.top-btn{
  bottom:70px;
  background:#00c853;
  display:none;
}

/* ---------- Lightbox ---------- */
#lightbox{
  position:fixed;
  inset:0;
  background:#000;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#lightbox img{
  max-width:100%;
  max-height:100%;
}
#lightbox.close{
  display:flex;
}

/* Like animation */
.like{
  position:absolute;
  font-size:80px;
  color:#ff4081;
  opacity:0;
  animation:like .8s ease forwards;
}
@keyframes like{
  0%{transform:scale(.5);opacity:0}
  50%{opacity:1}
  100%{transform:scale(1.4);opacity:0}
}
</style>
</head>

<body>

<button class="jump-btn" onclick="goToQuotes()">üëÄ</button>
<button class="jump-btn top-btn" onclick="goTop()">‚¨Ü</button>

<audio id="bgMusic" loop>
  <source src="music/bg.mp3" type="audio/mpeg">
</audio>

<h1>liviiii.fr üçÇ</h1>

<div class="top-bar">
  <button onclick="toggleMode()">üåì</button>
  <button onclick="downloadZip()">üì¶</button>
</div>

<h2>Skins</h2>
<div class="gallery" id="public"></div>

<h2 id="quotesSection">Quotes</h2>
<div class="gallery" id="quotes"></div>

<!-- Lightbox -->
<div id="lightbox" onclick="closeLightbox()">
  <img id="lightImg">
</div>

<script>
document.body.addEventListener("click",()=>{
  const m=document.getElementById("bgMusic");
  if(m.paused)m.play().catch(()=>{})
},{once:true});

const PUBLIC_COUNT=20;
const QUOTES_COUNT=10;

const favs=JSON.parse(localStorage.getItem("favs")||"[]");

function loadGallery(folder,count,prefix,id){
  const g=document.getElementById(id);
  for(let i=1;i<=count;i++){
    const d=document.createElement("div");
    d.className="item";

    const img=document.createElement("img");
    img.src=`${folder}/${prefix}${i}.jpg`;
    img.loading="lazy";
    img.onload=()=>img.classList.add("loaded");
    img.onclick=()=>openLightbox(img.src);

    let tap=0;
    img.addEventListener("touchend",e=>{
      tap++;
      if(tap===2){
        showLike(e);
        tap=0;
      }
      setTimeout(()=>tap=0,300);
    });

    const fav=document.createElement("div");
    fav.className="fav";
    fav.textContent="‚≠ê";
    if(favs.includes(img.src))fav.classList.add("active");
    fav.onclick=e=>{
      e.stopPropagation();
      fav.classList.toggle("active");
      toggleFav(img.src);
    };

    const dl=document.createElement("a");
    dl.className="download";
    dl.textContent="‚¨á";
    dl.href=img.src;
    dl.download="";

    const wm=document.createElement("span");
    wm.className="watermark";
    wm.textContent="ùì≤ùìºùì™ùì™ùì¨ üÖ¥";

    d.append(img,fav,dl,wm);
    g.appendChild(d);
  }
}

loadGallery("photos",PUBLIC_COUNT,"photo","public");
loadGallery("quotes",QUOTES_COUNT,"quote","quotes");

/* Favorites */
function toggleFav(src){
  const i=favs.indexOf(src);
  if(i>-1)favs.splice(i,1);
  else favs.push(src);
  localStorage.setItem("favs",JSON.stringify(favs));
}

/* Lightbox */
function openLightbox(src){
  const l=document.getElementById("lightbox");
  document.getElementById("lightImg").src=src;
  l.style.display="flex";
}
function closeLightbox(){
  document.getElementById("lightbox").style.display="none";
}

/* Like animation */
function showLike(e){
  const h=document.createElement("div");
  h.className="like";
  h.textContent="‚ù§Ô∏è";
  h.style.left=e.changedTouches[0].clientX+"px";
  h.style.top=e.changedTouches[0].clientY+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),800);
}

/* Scroll helpers */
function goToQuotes(){
  document.getElementById("quotesSection").scrollIntoView({behavior:"smooth"});
}
function goTop(){
  window.scrollTo({top:0,behavior:"smooth"});
}

window.addEventListener("scroll",()=>{
  document.querySelector(".top-btn").style.display=window.scrollY>400?"block":"none";
});

/* Fade-in */
const obs=new IntersectionObserver(e=>{
  e.forEach(x=>x.isIntersecting&&x.target.classList.add("visible"));
});
document.querySelectorAll(".gallery").forEach(g=>obs.observe(g));
</script>

</body>
</html>
